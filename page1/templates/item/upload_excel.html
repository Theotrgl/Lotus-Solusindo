<!-- upload_csv.html -->
{% extends 'base.html' %}

{% block title %}Upload Excel{% endblock %}

{% block content %}
<h2>Upload Excel File</h2>
<div>
    <p>Please note that the Excel format should be:</p>
    <table class="table table-striped table-bordered table-responsive-lg">
        <thead>
            <tr>
                <th>nama</th>
                <th>catatan</th>
                <th>category</th>
                <th>quantity</th>
                <th>unit</th>
                <th>price</th>
                <th>gambar</th>
              </tr>
        </thead>
        <tbody>
            <tr>
                <td>Item Name</td>
                <td>Catatan....</td>
                <td>Kategori (Electronics,...) preferably the one available in existing category</td>
                <td>1, 2, 3, ...</td>
                <td>Unit, Box, Pcs, ...</td>
                <td>100000000 (don't use separator)</td>
                <td>image (no need link)</td>
            </tr>
        </tbody>
    </table>
    <p>Note: Add a row <span class="h5">price_currency</span> to specify the currency.</p>
    <p><span class="h5">price_currency</span> should consists of 3 digits currency code (IDR, USD, SGD, etc.)</p>

    <div class="col-md-12">
        <div class="row">
            <div class="col-md-6">
                <p>Categories:</p>
                <div class="dropdown">
                    <button class="btn btn-info dropdown-toggle" type="button" id="categoryDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        List of Categories
                    </button>
                    <div class="dropdown-menu" aria-labelledby="categoryDropdown">
                        {% for category in categories %}
                            <a class="dropdown-item" href="#">{{ category.name }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <p>Units:</p>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="unitDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        List of Units
                    </button>
                    <div class="dropdown-menu" aria-labelledby="unitDropdown">
                        <a class="dropdown-item" href="#">Botol</a>
                        <a class="dropdown-item" href="#">Box</a>
                        <a class="dropdown-item" href="#">Bulan</a>
                        <a class="dropdown-item" href="#">Dirigen</a>
                        <a class="dropdown-item" href="#">Item</a>
                        <a class="dropdown-item" href="#">Kaleng</a>
                        <a class="dropdown-item" href="#">Kg</a>
                        <a class="dropdown-item" href="#">Lusin</a>
                        <a class="dropdown-item" href="#">Meter</a>
                        <a class="dropdown-item" href="#">Orang</a>
                        <a class="dropdown-item" href="#">Pack</a>
                        <a class="dropdown-item" href="#">Pail (Cat)</a>
                        <a class="dropdown-item" href="#">Pair</a>
                        <a class="dropdown-item" href="#">Pcs</a>
                        <a class="dropdown-item" href="#">Unit</a>
                        <a class="dropdown-item" href="#">Lainnya</a>
                    </div>
                </div>
            </div>            
        </div>
    </div>
</div>
<form class="w-50 form-group mt-3" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form }}
    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Upload</button>
    </div>
</form>
<!-- <h1>Upload CSV</h1>
<form id="uploadForm" method="post" enctype="multipart/form-data" >
    {% csrf_token %}
    <div class="form-group">
        <input type="file" name="csv_file">
    </div>
    <button type="submit" class="btn btn-primary">Upload</button>
</form> -->

<!-- Display error messages if any
{% if messages %}
<div class="alert alert-danger mt-10" role="alert">
    <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %} -->
<!-- <script>
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var formData = new FormData(this);
    
        fetch('/upload_csv/', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('No Errors Found');
                alert(data.message); // Show success message
            } else {
                var errorMessage = 'Error importing items:\n' + data.errors.join('\n');
                alert(errorMessage); 
                alert(data.message);// Show error message
            }
        })
        .catch(error => {
            alert('An error occurred while processing the CSV: ' + error.message); // Show generic error message
        });
    });
    </script> -->
{% endblock %}
<!-- 
<h2>Upload Excel File</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form }}
    <button type="submit" class="btn btn-primary">Upload</button>
</form>-->
